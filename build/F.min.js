!function(){var a=function(a){return a instanceof j?a:new j("function"==typeof a.next?a:new b(a))};a.isEmptyValue=function(a){return"undefined"==typeof a.value};var b=function(a){this._collection=a,this._index=-1};b.prototype.next=function(){return this._index++,{value:this._collection[this._index],done:this._index>=this._collection.length-1}};var c=function(a,b){this._iter=a,this._func=b};c.prototype.next=function(){var b=this._iter.next();return a.isEmptyValue(b)?b:{value:this._func(b.value),done:b.done}};var d=function(a,b){this._iter=a,this._pred=b};d.prototype.next=function(){var b=this._iter.next();return a.isEmptyValue(b)||this._pred(b.value)||delete b.value,b};var e=function(a,b){this._iter=a,this._func=b};e.prototype.next=function(){var b=this._iter.next();return a.isEmptyValue(b)||this._func(b.value),b};var f=function(a,b){this._iter=a,this._count=b};f.prototype.next=function(){var a=this._iter.next();return this._count-->0&&delete a.value,a};var g=function(a,b){this._iter=a,this._pred=b,this._dropped=!1};g.prototype.next=function(){var a=this._iter.next();return this._dropped||(this._pred(a.value)?delete a.value:this._dropped=!0),a};var h=function(a,b){this._iter=a,this._zipIter=b};h.prototype.next=function(){var b=this._iter.next(),c=this._zipIter.next(),d=b.done||c.done;return a.isEmptyValue(b)||a.isEmptyValue(c)?{done:!0}:{done:d,value:[b.value,c.value]}};var i=function(b){this._iterators=b.slice(1),this._activeIter=b.length?b[0]:a([])._iter};i.prototype.next=function(){for(var b;;){if(b=this._activeIter.next(),!a.isEmptyValue(b)||!this._iterators.length)break;this._activeIter=this._iterators[0],this._iterators=this._iterators.slice(1)}return b.done&&this._iterators.length&&(b.done=!1,this._activeIter=this._iterators[0],this._iterators=this._iterators.slice(1)),b};var j=function(a){this._iter=a};j.prototype.concat=function(){return a(new i([this._iter].concat(a(arguments).map(function(b){return a(b)._iter}).toArray())))},j.prototype.flatten=function(){return a(new i(this.map(function(b){return a(b)._iter}).toArray()))},j.prototype.map=function(b){return a(new c(this._iter,b))},j.prototype.filter=function(b){return a(new d(this._iter,b))},j.prototype.zip=function(b){return a(new h(this._iter,a(b)._iter))},j.prototype.toArray=function(){var b,c=[];do b=this._iter.next(),a.isEmptyValue(b)||c.push(b.value);while(!b.done);return c},j.prototype.toMap=function(){var b,c={};do b=this._iter.next(),a.isEmptyValue(b)||(c[b.value[0]]=b.value[1]);while(!b.done);return c},j.prototype.partition=function(b){var c,d=[[],[]];do c=this._iter.next(),a.isEmptyValue(c)||(b(c.value)?d[0].push(c.value):d[1].push(c.value));while(!c.done);return d},j.prototype.find=function(b){var c;do if(c=this._iter.next(),!a.isEmptyValue(c)&&b(c.value))return c.value;while(!c.done)},j.prototype.findIndex=function(b){var c,d=-1;do if(c=this._iter.next(),d++,!a.isEmptyValue(c)&&b(c.value))return d;while(!c.done);return-1},j.prototype.drop=function(b){return a(new f(this._iter,b))},j.prototype.dropWhile=function(b){return a(new g(this._iter,b))},j.prototype.fold=function(b,c){var d;do d=this._iter.next(),a.isEmptyValue(d)||(c="undefined"==typeof c?d.value:b(c,d.value));while(!d.done);return c},j.prototype.foreach=function(b){var c,d=0;do c=this._iter.next(),a.isEmptyValue(c)||b(c.value,d++,c.done);while(!c.done)},j.prototype.each=function(b){return a(new e(this._iter,b))},j.prototype.feedStream=function(b){return a(new e(this._iter,function(a){b.push(a)}))},j.prototype.reverse=function(){var b,c=[];do b=this._iter.next(),a.isEmptyValue(b)||c.unshift(b.value);while(!b.done);return a(c)},j.prototype.property=function(){var b=arguments;return a(new c(this._iter,function(a){for(var c=0;c<b.length;c++){if("undefined"==typeof a[b[c]])return null;a=a[b[c]]}return a}))},a.Iterable=j,this.F=a}(this),function(){F.stream=function(){return F.lastStream=new a},F.eventStream=function(a,b){var c=F.stream();return"function"==typeof a.addEventListener?a.addEventListener(b,function(a){c.push(a)}):"function"==typeof a.addEventListener&&a.on(b,function(a){c.push(a)}),c};var a=function(){this._done=!1,this._value=void 0,this._eventListeners=[],this._doneListeners=[]};a.prototype.then=function(a){this._doneListeners.push(a)},a.prototype.done=function(a){this._doneListeners.push(a)},a.prototype.push=function(a){if(!this._done){this._value=a;for(var b=0;b<this._doneListeners.length;b++)this._doneListeners[b](this._value)}},a.prototype.pushAll=function(a){if(!this._done)for(var b=0;b<a.length;b++)this.push(a[b])},a.prototype.next=function(){return{value:this._value,done:this._done}},a.prototype.stop=function(){if(!this._done){delete this._value,this._done=!0;for(var a=0;a<this._doneListeners.length;a++)this._doneListeners[a]()}},F.Iterable.prototype.pullStream=function(a,b){b||(b=P.alwaysTrue);var c=this;return new Promise(function(d){var e=[];a.then(function(){var d=c._iter.next();F.isEmptyValue(d)||e.push(d.value),(!b(d.value)||d.done)&&a.stop()}),a.done(function(){d(e)})})}}(this),function(){var a=function(){};a.and=function(){var a=arguments;return a&&Array.isArray(a[0])&&(a=a[0]),function(b){for(var c=0;c<a.length;c++)if(!a[c](b))return!1;return!0}},a.or=function(){var a=arguments;return a&&Array.isArray(a[0])&&(a=a[0]),function(b){for(var c=0;c<a.length;c++)if(a[c](b))return!0;return!1}},a.not=function(a){return function(b){return!a(b)}},a.alwaysTrue=function(){return!0},a.alwaysFalse=function(){return!1},a.isNull=function(a){return null==a},a.notNull=function(a){return null!=a},a.hasProperty=function(){var a=arguments;return function(b){for(var c=0;c<a.length;c++){if("undefined"==typeof b[a[c]])return!1;b=b[a[c]]}return!0}},a["in"]=function(a){return function(b){return-1!=a.indexOf(b)}},a.equalTo=function(a){return function(b){return b==a}},a.strongEqualTo=function(a){return function(b){return b===a}},a.instanceOf=function(a){return function(b){return b instanceof a}},a.on=function(){var a=arguments[arguments.length-1],b=arguments;return function(c){for(var d=0;d<b.length-1;d++){if("undefined"==typeof c[b[d]])return!1;c=c[b[d]]}return a(c)}},a.count=function(a){return function(){return a-->0?!0:!1}},a.limit=function(a){return function(){return--a>0?!0:!1}},this.P=a}(this);