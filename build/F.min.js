!function(){var a=function(a){return a instanceof m?a:new m("function"==typeof a.next?a:new c(a))},b=function(a){return"undefined"==typeof a.value},c=function(a){this._collection=a,this._index=-1};c.prototype.next=function(){return this._index++,{value:this._collection[this._index],done:this._index>=this._collection.length-1}};var d=function(a,b){this._iter=a,this._func=b};d.prototype.next=function(){var a=this._iter.next();return b(a)?a:{value:this._func(a.value),done:a.done}};var e=function(a,b){this._iter=a,this._pred=b};e.prototype.next=function(){var a=this._iter.next();return b(a)||this._pred(a.value)||delete a.value,a};var f=function(a,b){this._iter=a,this._func=b};f.prototype.next=function(){var a=this._iter.next();return b(a)||this._func(a.value),a};var g=function(a,b){this._iter=a,this._pred=b,this._buffer=[]};g.prototype.next=function(){var a=this._iter.next();return b(a)||(this._buffer.push(a.value),this._pred(a.value)?a.value=this._buffer.splice(0):delete a.value),a};var h=function(a,b){this._iter=a,this._count=b};h.prototype.next=function(){var a=this._iter.next();return b(a)||this._count-->0&&delete a.value,a};var i=function(a,b){this._iter=a,this._count=b};i.prototype.next=function(){var a=this._iter.next();return b(a)||--this._count<=0&&(a.done=!0),a};var j=function(a,b){this._iter=a,this._pred=b,this._dropped=!1};j.prototype.next=function(){var a=this._iter.next();return this._dropped||(this._pred(a.value)?delete a.value:this._dropped=!0),a};var k=function(a,b){this._iter=a,this._zipIter=b,this._value={done:!1},this._zipValue={done:!1}};k.prototype.next=function(){b(this._value)&&(this._value=this._iter.next()),b(this._zipValue)&&(this._zipValue=this._zipIter.next());var a={done:this._value.done||this._zipValue.done,value:[this._value.value,this._zipValue.value]};return b(this._value)||b(this._zipValue)?delete a.value:(this._value.value=void 0,this._zipValue.value=void 0),a};var l=function(b){this._iterators=b.slice(1),this._activeIter=b.length?b[0]:a([])._iter};l.prototype.next=function(){for(var a;;){if(a=this._activeIter.next(),!b(a)||!this._iterators.length)break;this._activeIter=this._iterators[0],this._iterators=this._iterators.slice(1)}return a.done&&this._iterators.length&&(a.done=!1,this._activeIter=this._iterators[0],this._iterators=this._iterators.slice(1)),a};var m=function(a){this._iter=a};m.prototype.concat=function(){return a(new l([this._iter].concat(a(arguments).map(function(b){return a(b)._iter}).toArray())))},m.prototype.flatten=function(){return a(new l(this.map(function(b){return a(b)._iter}).toArray()))},m.prototype.map=function(b){return a(new d(this._iter,b))},m.prototype.filter=function(b){return a(new e(this._iter,b))},m.prototype.zip=function(b){return a(new k(this._iter,a(b)._iter))},m.prototype.toArray=function(){var a,c=[];do a=this._iter.next(),b(a)||c.push(a.value);while(!a.done);return c},m.prototype.toMap=function(){var a,c={};do a=this._iter.next(),b(a)||(c[a.value[0]]=a.value[1]);while(!a.done);return c},m.prototype.partition=function(a){var c,d=[[],[]];do c=this._iter.next(),b(c)||(a(c.value)?d[0].push(c.value):d[1].push(c.value));while(!c.done);return d},m.prototype.find=function(a){var c;do if(c=this._iter.next(),!b(c)&&a(c.value))return c.value;while(!c.done)},m.prototype.findIndex=function(a){var c,d=-1;do if(c=this._iter.next(),d++,!b(c)&&a(c.value))return d;while(!c.done);return-1},m.prototype.drop=function(b){return a(new h(this._iter,b))},m.prototype.take=function(b){return a(new i(this._iter,b))},m.prototype.dropWhile=function(b){return a(new j(this._iter,b))},m.prototype.fold=function(a,c){var d;do d=this._iter.next(),b(d)||(c="undefined"==typeof c?d.value:a(c,d.value));while(!d.done);return c},m.prototype.foreach=function(a){var c,d=0;do c=this._iter.next(),b(c)||a(c.value,d++,c.done);while(!c.done)},m.prototype.each=function(b){return a(new f(this._iter,b))},m.prototype.feedStream=function(b){return a(new f(this._iter,function(a){b.push(a)}))},m.prototype.reverse=function(){var c,d=[];do c=this._iter.next(),b(c)||d.unshift(c.value);while(!c.done);return a(d)},m.prototype.property=function(){var b=arguments;return a(new d(this._iter,function(a){for(var c=0;c<b.length;c++){if("undefined"==typeof a[b[c]])return null;a=a[b[c]]}return a}))},m.prototype.accumulateUntil=function(b){return a(new g(this._iter,b))},m.prototype.log=function(){return a(new f(this._iter,function(a){console.log(a)}))},a.Iterable=m,a.isEmptyValue=b,this.F=a}(this),function(){F.stream=function(){return F.lastStream=new a},F.eventStream=function(a,b){var c=F.stream(),d=function(a){c.push(a)};return"function"==typeof a.addEventListener?(a.addEventListener(b,d),c.done(function(){a.removeEventListener(b,d)})):"function"==typeof a.on&&(a.on(b,d),c.done(function(){a.off(b,d)})),c},F.multiplexStream=function(){var a,b=F.stream(),c=0,d=function(a){b.push(a)},e=function(){++c===a.length&&b.stop()};a=Array.isArray(arguments[0])?arguments[0]:arguments;for(var f=0;f<a.length;f++)a[f].then(d).done(e);return b},F.intervalStream=function(a,b){var c=F.stream(),d=setInterval(function(){c.push(a)},b);return c.done(function(){clearInterval(d)}),c},F.timerStream=function(a,b){var c=F.stream(),d=setTimeout(function(){c.push(a),c.stop()},b);return c.done(function(){clearTimeout(d)}),c};var a=function(){this._done=!1,this._value=void 0,this._eventListeners=[],this._doneListeners=[]};a.prototype.then=function(a){return this._eventListeners.push(a),this},a.prototype.done=function(a){return this._doneListeners.push(a),this},a.prototype.push=function(a){if(this._done)return this;this._value=a;for(var b=0;b<this._eventListeners.length;b++)this._eventListeners[b](this._value);return this},a.prototype.pushAll=function(a){if(!this._done){for(var b=0;b<a.length;b++)this.push(a[b]);return this}},a.prototype.next=function(){return{value:this._value,done:this._done}},a.prototype.stop=function(){if(!this._done){delete this._value,this._done=!0;for(var a=0;a<this._doneListeners.length;a++)this._doneListeners[a]()}},F.Iterable.prototype.pullStream=function(a,b){b||(b=P.alwaysTrue);var c=this;return new Promise(function(d){var e=[];a.then(function(){var d=c._iter.next();F.isEmptyValue(d)||e.push(d.value),(!b(d.value)||d.done)&&a.stop()}),a.done(function(){d(e)})})}}(this),function(){var a=function(){};a.and=function(){var a=arguments;return a&&Array.isArray(a[0])&&(a=a[0]),function(b){for(var c=0;c<a.length;c++)if(!a[c](b))return!1;return!0}},a.or=function(){var a=arguments;return a&&Array.isArray(a[0])&&(a=a[0]),function(b){for(var c=0;c<a.length;c++)if(a[c](b))return!0;return!1}},a.not=function(a){return function(b){return!a(b)}},a.alwaysTrue=function(){return!0},a.alwaysFalse=function(){return!1},a.isNull=function(a){return null===a},a.notNull=function(a){return null!==a},a.hasProperty=function(){var a=arguments;return function(b){for(var c=0;c<a.length;c++){if("undefined"==typeof b[a[c]])return!1;b=b[a[c]]}return!0}},a["in"]=function(a){return function(b){return-1!==a.indexOf(b)}},a.equalTo=function(a){return function(b){return b==a}},a.strongEqualTo=function(a){return function(b){return b===a}},a.instanceOf=function(a){return function(b){return b instanceof a}},a.on=function(){var a=arguments[arguments.length-1],b=arguments;return function(c){for(var d=0;d<b.length-1;d++){if("undefined"==typeof c[b[d]])return!1;c=c[b[d]]}return a(c)}},a.count=function(a){return function(){return a-->0?!0:!1}},a.limit=function(a){return function(){return--a>0?!0:!1}},this.P=a}(this);